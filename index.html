<!doctype html>
<html>
    <head>
        <title>Aquila SlideShow</title>
    </head>
    <body>
        <canvas id="canvas"></canvas>
        <div id="presentation"></div>
        <div id="buttons">
            <button id="prevBtn" onclick="navPrev()">Prev</button>
            <button id="nextBtn" onclick="navNext()">Next</button>
        </div>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js"></script>
        <script>
    
                        var socket = io();
                        var ctx = document.getElementById('canvas').getContext('2d');
                        var present = document.getElementById('presentation');
                        var prevImage=new Image(), nextImage =new Image();

                        
            socket.emit('start');
            socket.on('start-res', (data) => {
                console.log(`response message -> ${JSON.stringify(data)}`);
                if(data.image) {
                    prevImage.src = 'data:image/png;base64, ' + data.buf;
                    present.appendChild(prevImage);
                }
            });

            socket.on('next-slide', (data) => {
                console.log(`next slide message -> ${JSON.stringify(data)}`);
                if(data.image) {
                    prevImage.src = 'data:image/png;base64, ' + data.buf;
                    //nextImage.src = 'data:image/png;base64, ' + data.buf;
                    //present.replaceChild(prevImage, nextImage);
                    //present.appendChild(nextImage);
                    //prevImage = Object.assign({},nextImage);
                    //nextImage = new Image();
                }
            });

            socket.on('prev-slide', (data) => {
                console.log(`prev slide message -> ${JSON.stringify(data)}`);
                if(data.image) {
                    prevImage.src = 'data:image/png;base64, ' + data.buf;
                }
            });

            

            function navNext(){
                socket.emit('slide-next');
            }
            function navPrev(){
                socket.emit('slide-next');
            }
          
          </script>
    </body>
</html>